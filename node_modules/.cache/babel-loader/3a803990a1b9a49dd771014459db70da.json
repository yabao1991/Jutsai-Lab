{"ast":null,"code":"var _jsxFileName = \"/Users/yabao/Documents/githubspace/Jutsai-Lab/src/apps/bao/baoApp/views/examples/react/TodoList/pages/App.js\";\n// Bao - Hello world from JS\nimport React, { useEffect, useState, useRef, memo } from \"react\";\nimport { createSet, createAdd, createRemove, createToggle } from './actions';\nimport reducer from './reducers';\nimport './App.scss';\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  const ret = {};\n\n  for (let key in actionCreators) {\n    ret[key] = function (...args) {\n      const actionCreator = actionCreators[key];\n      const action = actionCreator(...args);\n      dispatch(action);\n    };\n  }\n\n  return ret;\n}\n\nconst Control = memo(function Control(props) {\n  // const { dispatch } = props\n  const {\n    addTodo\n  } = props;\n  const inputRef = useRef();\n\n  const onSubmit = e => {\n    e.preventDefault();\n    const newText = inputRef.current.value.trim();\n\n    if (newText.length === 0) {\n      return;\n    }\n\n    addTodo(newText);\n    inputRef.current.value = '';\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }, \"TODOS\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    ref: inputRef,\n    type: \"text\",\n    className: \"new-todo\",\n    placeholder: \"What needs to be done?\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  })));\n});\nconst TodoItem = memo(function TodoItem(props) {\n  const {\n    todo: {\n      id,\n      text,\n      complete\n    },\n    removeTodo,\n    toggleTodo\n  } = props;\n\n  const onChange = () => {\n    toggleTodo(id);\n  };\n\n  const onRemove = () => {\n    removeTodo(id);\n  };\n\n  return /*#__PURE__*/React.createElement(\"li\", {\n    className: \"todo-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    onChange: onChange,\n    checked: complete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    className: complete ? 'complete' : '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }, text), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: onRemove,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }, \"\\xD7\"));\n});\n\nfunction Todos(props) {\n  const {\n    todos,\n    removeTodo,\n    toggleTodo\n  } = props;\n  return /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }\n  }, todos.map(todo => {\n    return /*#__PURE__*/React.createElement(TodoItem, {\n      key: todo.id,\n      todo: todo,\n      removeTodo: removeTodo,\n      toggleTodo: toggleTodo,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 13\n      }\n    });\n  }));\n}\n\nconst LS_KEY = '_TODOS_';\nlet store = {\n  todos: [],\n  incrementCount: 0\n};\n\nfunction Todolist() {\n  const [todos, setTodos] = useState([]);\n  const [incrementCount, setIncrementCount] = useState(0);\n\n  const dispatch = action => {\n    const setters = {\n      todos: setTodos,\n      incrementCount: setIncrementCount\n    };\n\n    if ('function' === typeof action) {\n      action(dispatch, () => store);\n      return;\n    }\n\n    const newState = reducer(store, action);\n\n    for (let key in newState) {\n      setters[key](newState[key]);\n    }\n  };\n\n  useEffect(() => {\n    Object.assign(store, {\n      todos,\n      incrementCount\n    });\n  }, [todos, incrementCount]);\n  useEffect(() => {\n    const todos = JSON.parse(localStorage.getItem(LS_KEY) || '[]');\n    dispatch(createSet(todos));\n  }, []);\n  useEffect(() => {\n    localStorage.setItem(LS_KEY, JSON.stringify(todos));\n  }, [todos]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"todo-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Control, Object.assign({}, bindActionCreators({\n    addTodo: createAdd\n  }, dispatch), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }\n  })), /*#__PURE__*/React.createElement(Todos, Object.assign({\n    todos: todos\n  }, bindActionCreators({\n    removeTodo: createRemove,\n    toggleTodo: createToggle\n  }, dispatch), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }\n  })));\n}\n\nexport default Todolist;","map":{"version":3,"sources":["/Users/yabao/Documents/githubspace/Jutsai-Lab/src/apps/bao/baoApp/views/examples/react/TodoList/pages/App.js"],"names":["React","useEffect","useState","useRef","memo","createSet","createAdd","createRemove","createToggle","reducer","bindActionCreators","actionCreators","dispatch","ret","key","args","actionCreator","action","Control","props","addTodo","inputRef","onSubmit","e","preventDefault","newText","current","value","trim","length","TodoItem","todo","id","text","complete","removeTodo","toggleTodo","onChange","onRemove","Todos","todos","map","LS_KEY","store","incrementCount","Todolist","setTodos","setIncrementCount","setters","newState","Object","assign","JSON","parse","localStorage","getItem","setItem","stringify"],"mappings":"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","sourcesContent":["// Bao - Hello world from JS\nimport React,\n  {\n    useEffect,\n    useState,\n    useRef,\n    memo\n  }\nfrom \"react\";\nimport {\n  createSet,\n  createAdd,\n  createRemove,\n  createToggle\n} from './actions'\nimport reducer from './reducers'\n\nimport './App.scss'\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  const ret = {}\n\n  for (let key in actionCreators) {\n    ret[key] = function(...args) {\n      const actionCreator = actionCreators[key]\n      const action = actionCreator(...args)\n      dispatch(action)\n    }\n\n  }\n\n  return ret\n\n}\n\nconst Control = memo(function Control(props) {\n  // const { dispatch } = props\n  const { addTodo } = props\n  const inputRef = useRef()\n\n  const onSubmit = (e) => {\n    e.preventDefault()\n    const newText = inputRef.current.value.trim()\n    if (newText.length === 0) {\n      return \n    }\n\n    addTodo(newText)\n\n    inputRef.current.value = ''\n  }\n  return (\n    <div className=\"control\">\n      <h1>TODOS</h1>\n      <form onSubmit={onSubmit}>\n\n        <input\n          ref={inputRef}\n          type=\"text\"\n          className=\"new-todo\"\n          placeholder=\"What needs to be done?\"\n        />\n\n      </form>\n    </div>\n  )\n})\n\nconst TodoItem = memo(function TodoItem(props) {\n  const { \n    todo: {\n      id,\n      text,\n      complete\n    },\n    removeTodo,\n    toggleTodo\n  } = props\n\n  const onChange = () => {\n    toggleTodo(id)\n  }\n  const onRemove = () => {\n    removeTodo(id)\n  }\n  return (\n    <li className=\"todo-item\">\n      <input\n        type=\"checkbox\"\n        onChange={onChange}\n        checked={complete}\n      />\n      <label className={complete ? 'complete' : ''}>{text}</label>\n      <button onClick={onRemove}>&#xd7;</button>\n    </li>\n  )\n\n})\n\nfunction Todos(props) {\n  const { todos, removeTodo, toggleTodo } = props\n  return (\n    <ul>\n      {\n        todos.map(todo => {\n          return (\n            <TodoItem\n              key={todo.id}\n              todo={todo}\n              removeTodo={removeTodo}\n              toggleTodo={toggleTodo}\n            />\n          )\n        })\n      }\n    </ul>\n  )\n}\n\nconst LS_KEY = '_TODOS_'\n\nlet store = {\n  todos: [],\n  incrementCount: 0,\n}\n\nfunction Todolist() {\n  const [todos, setTodos] = useState([])\n  const [incrementCount, setIncrementCount] = useState(0)\n\n  const dispatch = (action) => {\n    const setters = {\n      todos: setTodos,\n      incrementCount: setIncrementCount\n    }\n\n    if ('function' === typeof action) {\n      action(dispatch, () => store)\n      return\n    }\n\n    const newState = reducer(store, action)\n\n    for (let key in newState) {\n      setters[key](newState[key])\n    }\n\n  }\n\n  useEffect(() => {\n    Object.assign(store, {\n      todos,\n      incrementCount\n    })\n  }, [todos, incrementCount])\n\n  useEffect(() => {\n    const todos = JSON.parse(localStorage.getItem(LS_KEY) || '[]')\n    dispatch(createSet(todos))\n  }, [])\n\n  useEffect(() => {\n    localStorage.setItem(LS_KEY, JSON.stringify(todos))\n  }, [todos])\n\n  return (\n    <div className=\"todo-list\">\n      <Control\n        {\n          ...bindActionCreators({\n            addTodo: createAdd\n          }, dispatch)\n        }\n      />\n      <Todos\n        todos={todos}\n        {\n          ...bindActionCreators({\n            removeTodo: createRemove,\n            toggleTodo: createToggle\n          }, dispatch)\n        }\n      />\n    </div>\n  );\n}\n\nexport default Todolist;\n"]},"metadata":{},"sourceType":"module"}