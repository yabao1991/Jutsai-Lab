{"ast":null,"code":"import _slicedToArray from\"/Users/yabao/Documents/githubspace/Jutsai-Lab/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// Bao - Hello world from JS\nimport React,{useEffect,useState,useRef,memo}from\"react\";import{createSet,createAdd,createRemove,createToggle}from'./actions';import reducer from'./reducers';import'./App.scss';function bindActionCreators(actionCreators,dispatch){var ret={};var _loop=function _loop(key){ret[key]=function(){var actionCreator=actionCreators[key];var action=actionCreator.apply(void 0,arguments);dispatch(action);};};for(var key in actionCreators){_loop(key);}return ret;}var Control=memo(function Control(props){// const { dispatch } = props\nvar addTodo=props.addTodo;var inputRef=useRef();var onSubmit=function onSubmit(e){e.preventDefault();var newText=inputRef.current.value.trim();if(newText.length===0){return;}addTodo(newText);inputRef.current.value='';};return/*#__PURE__*/React.createElement(\"div\",{className:\"control\"},/*#__PURE__*/React.createElement(\"h1\",null,\"TODOS\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:onSubmit},/*#__PURE__*/React.createElement(\"input\",{ref:inputRef,type:\"text\",className:\"new-todo\",placeholder:\"What needs to be done?\"})));});var TodoItem=memo(function TodoItem(props){var _props$todo=props.todo,id=_props$todo.id,text=_props$todo.text,complete=_props$todo.complete,removeTodo=props.removeTodo,toggleTodo=props.toggleTodo;var onChange=function onChange(){toggleTodo(id);};var onRemove=function onRemove(){removeTodo(id);};return/*#__PURE__*/React.createElement(\"li\",{className:\"todo-item\"},/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",onChange:onChange,checked:complete}),/*#__PURE__*/React.createElement(\"label\",{className:complete?'complete':''},text),/*#__PURE__*/React.createElement(\"button\",{onClick:onRemove},\"\\xD7\"));});function Todos(props){var todos=props.todos,removeTodo=props.removeTodo,toggleTodo=props.toggleTodo;return/*#__PURE__*/React.createElement(\"ul\",null,todos.map(function(todo){return/*#__PURE__*/React.createElement(TodoItem,{key:todo.id,todo:todo,removeTodo:removeTodo,toggleTodo:toggleTodo});}));}var LS_KEY='_TODOS_';var store={todos:[],incrementCount:0};function Todolist(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),todos=_useState2[0],setTodos=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),incrementCount=_useState4[0],setIncrementCount=_useState4[1];var dispatch=function dispatch(action){var setters={todos:setTodos,incrementCount:setIncrementCount};if('function'===typeof action){action(dispatch,function(){return store;});return;}var newState=reducer(store,action);for(var key in newState){setters[key](newState[key]);}};useEffect(function(){Object.assign(store,{todos:todos,incrementCount:incrementCount});},[todos,incrementCount]);useEffect(function(){var todos=JSON.parse(localStorage.getItem(LS_KEY)||'[]');dispatch(createSet(todos));},[]);useEffect(function(){localStorage.setItem(LS_KEY,JSON.stringify(todos));},[todos]);return/*#__PURE__*/React.createElement(\"div\",{className:\"todo-list\"},/*#__PURE__*/React.createElement(Control,bindActionCreators({addTodo:createAdd},dispatch)),/*#__PURE__*/React.createElement(Todos,Object.assign({todos:todos},bindActionCreators({removeTodo:createRemove,toggleTodo:createToggle},dispatch))));}export default Todolist;","map":{"version":3,"sources":["/Users/yabao/Documents/githubspace/Jutsai-Lab/src/apps/bao/baoApp/views/examples/react/TodoList/pages/App.js"],"names":["React","useEffect","useState","useRef","memo","createSet","createAdd","createRemove","createToggle","reducer","bindActionCreators","actionCreators","dispatch","ret","key","actionCreator","action","Control","props","addTodo","inputRef","onSubmit","e","preventDefault","newText","current","value","trim","length","TodoItem","todo","id","text","complete","removeTodo","toggleTodo","onChange","onRemove","Todos","todos","map","LS_KEY","store","incrementCount","Todolist","setTodos","setIncrementCount","setters","newState","Object","assign","JSON","parse","localStorage","getItem","setItem","stringify"],"mappings":"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","sourcesContent":["// Bao - Hello world from JS\nimport React,\n  {\n    useEffect,\n    useState,\n    useRef,\n    memo\n  }\nfrom \"react\";\nimport {\n  createSet,\n  createAdd,\n  createRemove,\n  createToggle\n} from './actions'\nimport reducer from './reducers'\n\nimport './App.scss'\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  const ret = {}\n\n  for (let key in actionCreators) {\n    ret[key] = function(...args) {\n      const actionCreator = actionCreators[key]\n      const action = actionCreator(...args)\n      dispatch(action)\n    }\n\n  }\n\n  return ret\n\n}\n\nconst Control = memo(function Control(props) {\n  // const { dispatch } = props\n  const { addTodo } = props\n  const inputRef = useRef()\n\n  const onSubmit = (e) => {\n    e.preventDefault()\n    const newText = inputRef.current.value.trim()\n    if (newText.length === 0) {\n      return \n    }\n\n    addTodo(newText)\n\n    inputRef.current.value = ''\n  }\n  return (\n    <div className=\"control\">\n      <h1>TODOS</h1>\n      <form onSubmit={onSubmit}>\n\n        <input\n          ref={inputRef}\n          type=\"text\"\n          className=\"new-todo\"\n          placeholder=\"What needs to be done?\"\n        />\n\n      </form>\n    </div>\n  )\n})\n\nconst TodoItem = memo(function TodoItem(props) {\n  const { \n    todo: {\n      id,\n      text,\n      complete\n    },\n    removeTodo,\n    toggleTodo\n  } = props\n\n  const onChange = () => {\n    toggleTodo(id)\n  }\n  const onRemove = () => {\n    removeTodo(id)\n  }\n  return (\n    <li className=\"todo-item\">\n      <input\n        type=\"checkbox\"\n        onChange={onChange}\n        checked={complete}\n      />\n      <label className={complete ? 'complete' : ''}>{text}</label>\n      <button onClick={onRemove}>&#xd7;</button>\n    </li>\n  )\n\n})\n\nfunction Todos(props) {\n  const { todos, removeTodo, toggleTodo } = props\n  return (\n    <ul>\n      {\n        todos.map(todo => {\n          return (\n            <TodoItem\n              key={todo.id}\n              todo={todo}\n              removeTodo={removeTodo}\n              toggleTodo={toggleTodo}\n            />\n          )\n        })\n      }\n    </ul>\n  )\n}\n\nconst LS_KEY = '_TODOS_'\n\nlet store = {\n  todos: [],\n  incrementCount: 0,\n}\n\nfunction Todolist() {\n  const [todos, setTodos] = useState([])\n  const [incrementCount, setIncrementCount] = useState(0)\n\n  const dispatch = (action) => {\n    const setters = {\n      todos: setTodos,\n      incrementCount: setIncrementCount\n    }\n\n    if ('function' === typeof action) {\n      action(dispatch, () => store)\n      return\n    }\n\n    const newState = reducer(store, action)\n\n    for (let key in newState) {\n      setters[key](newState[key])\n    }\n\n  }\n\n  useEffect(() => {\n    Object.assign(store, {\n      todos,\n      incrementCount\n    })\n  }, [todos, incrementCount])\n\n  useEffect(() => {\n    const todos = JSON.parse(localStorage.getItem(LS_KEY) || '[]')\n    dispatch(createSet(todos))\n  }, [])\n\n  useEffect(() => {\n    localStorage.setItem(LS_KEY, JSON.stringify(todos))\n  }, [todos])\n\n  return (\n    <div className=\"todo-list\">\n      <Control\n        {\n          ...bindActionCreators({\n            addTodo: createAdd\n          }, dispatch)\n        }\n      />\n      <Todos\n        todos={todos}\n        {\n          ...bindActionCreators({\n            removeTodo: createRemove,\n            toggleTodo: createToggle\n          }, dispatch)\n        }\n      />\n    </div>\n  );\n}\n\nexport default Todolist;\n"]},"metadata":{},"sourceType":"module"}